<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/base}">

<head>
    <title>Customer Details</title>
</head>

<body>
    <div layout:fragment="content">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h2 class="mb-1" th:text="${customer.name}">Customer Name</h2>
                <p class="text-muted mb-0">Customer Details & Statistics</p>
            </div>
            <div>
                <a th:href="@{/customers/edit/{id}(id=${customer.id})}"
                    class="btn btn-outline-primary shadow-sm me-2"><i class="bi bi-pencil me-1"></i> Edit</a>
                <a th:href="@{/customers}" class="btn btn-secondary shadow-sm">Back to List</a>
            </div>
        </div>

        <div class="row g-4">
            <!-- Customer Info -->
            <div class="col-md-4">
                <div class="card shadow-sm h-100">
                    <div class="card-header bg-white py-3">
                        <h5 class="card-title mb-0"><i class="bi bi-person me-2"></i>Contact Info</h5>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled mb-0">
                            <li class="mb-3">
                                <small class="text-muted d-block uppercase-label">Contact Person</small>
                                <span class="fs-5" th:text="${customer.contactPerson}">Contact</span>
                            </li>
                            <li class="mb-3">
                                <small class="text-muted d-block uppercase-label">Email</small>
                                <a th:href="'mailto:' + ${customer.email}" class="text-decoration-none"
                                    th:text="${customer.email}">email@example.com</a>
                            </li>
                            <li class="mb-3">
                                <small class="text-muted d-block uppercase-label">Phone</small>
                                <span th:text="${customer.phone}">555-0123</span>
                            </li>
                            <li class="mb-0">
                                <small class="text-muted d-block uppercase-label">Type</small>
                                <span class="badge bg-info text-dark" th:text="${customer.type}">WHOLESALE</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Product Stats -->
            <div class="col-md-8">
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-white py-3">
                        <h5 class="card-title mb-0"><i class="bi bi-box-seam me-2"></i>Product Tracking</h5>
                    </div>
                    <div class="card-body">
                        <div class="row text-center">
                            <div class="col-md-4 border-end">
                                <h6 class="text-muted text-uppercase mb-2"
                                    style="font-size: 0.8rem; letter-spacing: 1px;">Total Sent</h6>
                                <h2 class="display-6 fw-bold text-primary" th:text="${totalSent}">0</h2>
                                <small class="text-muted">Unique Units Sold</small>
                            </div>
                            <div class="col-md-4 border-end">
                                <h6 class="text-muted text-uppercase mb-2"
                                    style="font-size: 0.8rem; letter-spacing: 1px;">Received Back</h6>
                                <h2 class="display-6 fw-bold text-danger" th:text="${totalReturned}">0</h2>
                                <small class="text-muted">Returns Processed</small>
                            </div>
                            <div class="col-md-4">
                                <h6 class="text-muted text-uppercase mb-2"
                                    style="font-size: 0.8rem; letter-spacing: 1px;">Return Rate</h6>
                                <h2 class="display-6 fw-bold"
                                    th:classappend="${returnRate > '10.0' ? 'text-warning' : 'text-success'}"
                                    th:text="${returnRate} + '%'">0%</h2>
                                <small class="text-muted">Calculated %</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions / Links -->
                <div class="card shadow-sm">
                    <div class="card-header bg-white py-3">
                        <h5 class="card-title mb-0"><i class="bi bi-lightning-charge me-2"></i>Actions</h5>
                    </div>
                    <div class="card-body">
                        <div class="d-grid gap-2 d-md-block">
                            <a th:href="@{/collections/statement(customerId=${customer.id})}"
                                class="btn btn-outline-dark"><i class="bi bi-receipt me-2"></i>View Financial
                                Statement</a>
                            <!-- Add more actions here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>